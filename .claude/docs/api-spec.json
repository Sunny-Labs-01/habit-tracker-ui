{
    "openapi": "3.0.3",
    "info": {
        "title": "Habit Tracker API",
        "description": "API for tracking daily habits and calculating completion scores.\n\n## Authentication\nAll `/api/*` endpoints require JWT authentication via the `Authorization: Bearer <token>` header.\nTokens are issued by Keycloak (RS256 + JWKS). The `/health` endpoint is unprotected.\n\n## Response Format\nAll responses follow a consistent format:\n```json\n{\n  \"data\": {},\n  \"message\": \"string\",\n  \"request_id\": \"uuid\"\n}\n```\n\n## Error Handling\nValidation errors (400) include details in the `data.errors` array.\n",
        "version": "1.0.0",
        "contact": {
            "name": "Habit Tracker API"
        }
    },
    "servers": [
        {
            "url": "http://localhost:3004",
            "description": "Local Development"
        }
    ],
    "security": [
        {
            "BearerAuth": []
        }
    ],
    "tags": [
        {
            "name": "Health",
            "description": "Health check endpoint"
        },
        {
            "name": "Habits",
            "description": "Habit management endpoints"
        },
        {
            "name": "Tracking",
            "description": "Habit tracking (daily completion logging) endpoints"
        },
        {
            "name": "Scores",
            "description": "Habit completion score calculation endpoints"
        }
    ],
    "paths": {
        "/health": {
            "get": {
                "tags": [
                    "Health"
                ],
                "summary": "Health check",
                "description": "Returns the health status of the API. This endpoint is unprotected.",
                "operationId": "healthCheck",
                "security": [],
                "responses": {
                    "200": {
                        "description": "Service is healthy",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "ok"
                                        }
                                    }
                                },
                                "example": {
                                    "status": "ok"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/habits": {
            "get": {
                "tags": [
                    "Habits"
                ],
                "summary": "List habits",
                "description": "Retrieve a list of habits for the authenticated user. Supports filtering by status and pagination.",
                "operationId": "listHabits",
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "name": "status",
                        "in": "query",
                        "description": "Filter habits by status",
                        "required": false,
                        "schema": {
                            "$ref": "#/components/schemas/HabitStatus"
                        },
                        "example": "ACTIVE"
                    },
                    {
                        "$ref": "#/components/parameters/LimitParam"
                    },
                    {
                        "$ref": "#/components/parameters/OffsetParam"
                    }
                ],
                "responses": {
                    "200": {
                        "$ref": "#/components/responses/HabitListSuccess"
                    },
                    "400": {
                        "$ref": "#/components/responses/BadRequest"
                    },
                    "401": {
                        "$ref": "#/components/responses/Unauthorized"
                    },
                    "500": {
                        "$ref": "#/components/responses/InternalServerError"
                    }
                }
            },
            "post": {
                "tags": [
                    "Habits"
                ],
                "summary": "Create a habit",
                "description": "Create a new habit for the authenticated user.",
                "operationId": "createHabit",
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CreateHabitRequest"
                            },
                            "examples": {
                                "basic": {
                                    "summary": "Create a habit with name only",
                                    "value": {
                                        "name": "Morning Exercise"
                                    }
                                },
                                "withDescription": {
                                    "summary": "Create a habit with name and description",
                                    "value": {
                                        "name": "Morning Exercise",
                                        "description": "30 minutes of cardio every morning"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "$ref": "#/components/responses/HabitSuccess"
                    },
                    "400": {
                        "$ref": "#/components/responses/BadRequest"
                    },
                    "401": {
                        "$ref": "#/components/responses/Unauthorized"
                    },
                    "500": {
                        "$ref": "#/components/responses/InternalServerError"
                    }
                }
            }
        },
        "/api/habits/{id}": {
            "get": {
                "tags": [
                    "Habits"
                ],
                "summary": "Get habit by ID",
                "description": "Retrieve a single habit by its unique identifier.",
                "operationId": "getHabitById",
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "$ref": "#/components/parameters/HabitId"
                    }
                ],
                "responses": {
                    "200": {
                        "$ref": "#/components/responses/HabitSuccess"
                    },
                    "401": {
                        "$ref": "#/components/responses/Unauthorized"
                    },
                    "404": {
                        "$ref": "#/components/responses/NotFound"
                    },
                    "500": {
                        "$ref": "#/components/responses/InternalServerError"
                    }
                }
            },
            "put": {
                "tags": [
                    "Habits"
                ],
                "summary": "Update habit name and description",
                "description": "Update the name and/or description of an existing habit.",
                "operationId": "updateHabit",
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "$ref": "#/components/parameters/HabitId"
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/UpdateHabitRequest"
                            },
                            "examples": {
                                "updateName": {
                                    "summary": "Update name only",
                                    "value": {
                                        "name": "Evening Walk"
                                    }
                                },
                                "updateBoth": {
                                    "summary": "Update name and description",
                                    "value": {
                                        "name": "Evening Walk",
                                        "description": "A 30-minute walk after dinner"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "$ref": "#/components/responses/HabitSuccess"
                    },
                    "400": {
                        "$ref": "#/components/responses/BadRequest"
                    },
                    "401": {
                        "$ref": "#/components/responses/Unauthorized"
                    },
                    "404": {
                        "$ref": "#/components/responses/NotFound"
                    },
                    "500": {
                        "$ref": "#/components/responses/InternalServerError"
                    }
                }
            },
            "delete": {
                "tags": [
                    "Habits"
                ],
                "summary": "Delete a habit",
                "description": "Soft-delete a habit by its unique identifier.",
                "operationId": "deleteHabit",
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "$ref": "#/components/parameters/HabitId"
                    }
                ],
                "responses": {
                    "204": {
                        "$ref": "#/components/responses/NoContent"
                    },
                    "401": {
                        "$ref": "#/components/responses/Unauthorized"
                    },
                    "404": {
                        "$ref": "#/components/responses/NotFound"
                    },
                    "500": {
                        "$ref": "#/components/responses/InternalServerError"
                    }
                }
            }
        },
        "/api/habits/{id}/status": {
            "put": {
                "tags": [
                    "Habits"
                ],
                "summary": "Update habit status",
                "description": "Update the status of a habit. Valid transitions depend on the current status:\n- `ACTIVE` \u2192 `PAUSED`, `STOPPED`, `ARCHIVED` - `PAUSED` \u2192 `ACTIVE`, `STOPPED`, `ARCHIVED` - `STOPPED` \u2192 `ACTIVE`, `ARCHIVED`\n",
                "operationId": "updateHabitStatus",
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "$ref": "#/components/parameters/HabitId"
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/UpdateHabitStatusRequest"
                            },
                            "examples": {
                                "pause": {
                                    "summary": "Pause a habit",
                                    "value": {
                                        "status": "PAUSED"
                                    }
                                },
                                "archive": {
                                    "summary": "Archive a habit",
                                    "value": {
                                        "status": "ARCHIVED"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "$ref": "#/components/responses/HabitSuccess"
                    },
                    "400": {
                        "$ref": "#/components/responses/BadRequest"
                    },
                    "401": {
                        "$ref": "#/components/responses/Unauthorized"
                    },
                    "404": {
                        "$ref": "#/components/responses/NotFound"
                    },
                    "500": {
                        "$ref": "#/components/responses/InternalServerError"
                    }
                }
            }
        },
        "/api/tracking": {
            "get": {
                "tags": [
                    "Tracking"
                ],
                "summary": "List tracking entries",
                "description": "Retrieve habit tracking entries for the authenticated user. Results can be filtered by habit, date range, and support pagination.\n",
                "operationId": "listTracking",
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "name": "habit_id",
                        "in": "query",
                        "description": "Filter entries by habit ID",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        },
                        "example": "a1b2c3d4-e5f6-4789-abcd-ef1234567890"
                    },
                    {
                        "name": "date_from",
                        "in": "query",
                        "description": "Filter entries from this date (inclusive, ISO 8601)",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "format": "date"
                        },
                        "example": "2026-02-01"
                    },
                    {
                        "name": "date_to",
                        "in": "query",
                        "description": "Filter entries up to this date (inclusive, ISO 8601)",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "format": "date"
                        },
                        "example": "2026-02-28"
                    },
                    {
                        "$ref": "#/components/parameters/LimitParam"
                    },
                    {
                        "$ref": "#/components/parameters/OffsetParam"
                    }
                ],
                "responses": {
                    "200": {
                        "$ref": "#/components/responses/TrackingListSuccess"
                    },
                    "401": {
                        "$ref": "#/components/responses/Unauthorized"
                    },
                    "500": {
                        "$ref": "#/components/responses/InternalServerError"
                    }
                }
            },
            "post": {
                "tags": [
                    "Tracking"
                ],
                "summary": "Log a tracking entry",
                "description": "Log whether a habit was completed on a given date.",
                "operationId": "createTracking",
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CreateTrackingRequest"
                            },
                            "examples": {
                                "completed": {
                                    "summary": "Mark a habit as completed",
                                    "value": {
                                        "habit_id": "a1b2c3d4-e5f6-4789-abcd-ef1234567890",
                                        "date": "2026-02-15",
                                        "completed": true
                                    }
                                },
                                "completedWithNote": {
                                    "summary": "Mark a habit as completed with a note",
                                    "value": {
                                        "habit_id": "a1b2c3d4-e5f6-4789-abcd-ef1234567890",
                                        "date": "2026-02-15",
                                        "completed": true,
                                        "note": "Felt great today!"
                                    }
                                },
                                "notCompleted": {
                                    "summary": "Mark a habit as not completed",
                                    "value": {
                                        "habit_id": "a1b2c3d4-e5f6-4789-abcd-ef1234567890",
                                        "date": "2026-02-15",
                                        "completed": false
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "$ref": "#/components/responses/TrackingSuccess"
                    },
                    "400": {
                        "$ref": "#/components/responses/BadRequest"
                    },
                    "401": {
                        "$ref": "#/components/responses/Unauthorized"
                    },
                    "409": {
                        "$ref": "#/components/responses/Conflict"
                    },
                    "500": {
                        "$ref": "#/components/responses/InternalServerError"
                    }
                }
            }
        },
        "/api/tracking/{id}": {
            "put": {
                "tags": [
                    "Tracking"
                ],
                "summary": "Update a tracking entry",
                "description": "Update a tracking entry's completion status or note. At least one field must be provided.",
                "operationId": "updateTracking",
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "$ref": "#/components/parameters/TrackingId"
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/UpdateTrackingRequest"
                            },
                            "examples": {
                                "updateCompleted": {
                                    "summary": "Update completion status only",
                                    "value": {
                                        "completed": true
                                    }
                                },
                                "updateNote": {
                                    "summary": "Update note only",
                                    "value": {
                                        "note": "Completed with extra effort today!"
                                    }
                                },
                                "updateAll": {
                                    "summary": "Update both fields",
                                    "value": {
                                        "completed": true,
                                        "note": "Completed with extra effort today!"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "$ref": "#/components/responses/TrackingSuccess"
                    },
                    "400": {
                        "$ref": "#/components/responses/BadRequest"
                    },
                    "401": {
                        "$ref": "#/components/responses/Unauthorized"
                    },
                    "404": {
                        "$ref": "#/components/responses/NotFound"
                    },
                    "500": {
                        "$ref": "#/components/responses/InternalServerError"
                    }
                }
            }
        },
        "/api/scores/daily": {
            "get": {
                "tags": [
                    "Scores"
                ],
                "summary": "Get daily score",
                "description": "Returns the habit completion score for a given day. Defaults to today if no date is provided.\n",
                "operationId": "getDailyScore",
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "name": "date",
                        "in": "query",
                        "description": "Date to calculate the score for (YYYY-MM-DD). Defaults to today.",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "format": "date"
                        },
                        "example": "2026-02-15"
                    }
                ],
                "responses": {
                    "200": {
                        "$ref": "#/components/responses/DailyScoreSuccess"
                    },
                    "400": {
                        "$ref": "#/components/responses/BadRequest"
                    },
                    "401": {
                        "$ref": "#/components/responses/Unauthorized"
                    },
                    "500": {
                        "$ref": "#/components/responses/InternalServerError"
                    }
                }
            }
        },
        "/api/scores/weekly": {
            "get": {
                "tags": [
                    "Scores"
                ],
                "summary": "Get weekly score",
                "description": "Returns the habit completion score for a given ISO calendar week. Defaults to the current year and week number if not provided.\n",
                "operationId": "getWeeklyScore",
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "name": "year",
                        "in": "query",
                        "description": "ISO year (e.g. 2026). Defaults to the current year.",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "minimum": 2000,
                            "maximum": 2200
                        },
                        "example": 2026
                    },
                    {
                        "name": "weekNumber",
                        "in": "query",
                        "description": "ISO week number (1\u201353). Defaults to the current week.",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "minimum": 1,
                            "maximum": 53
                        },
                        "example": 7
                    }
                ],
                "responses": {
                    "200": {
                        "$ref": "#/components/responses/WeeklyScoreSuccess"
                    },
                    "400": {
                        "$ref": "#/components/responses/BadRequest"
                    },
                    "401": {
                        "$ref": "#/components/responses/Unauthorized"
                    },
                    "500": {
                        "$ref": "#/components/responses/InternalServerError"
                    }
                }
            }
        },
        "/api/scores/monthly": {
            "get": {
                "tags": [
                    "Scores"
                ],
                "summary": "Get monthly score",
                "description": "Returns the habit completion score for a given calendar month. Defaults to the current year and month if not provided.\n",
                "operationId": "getMonthlyScore",
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "name": "year",
                        "in": "query",
                        "description": "Year (e.g. 2026). Defaults to the current year.",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "minimum": 2000,
                            "maximum": 2200
                        },
                        "example": 2026
                    },
                    {
                        "name": "month",
                        "in": "query",
                        "description": "Month number (1\u201312). Defaults to the current month.",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "minimum": 1,
                            "maximum": 12
                        },
                        "example": 2
                    }
                ],
                "responses": {
                    "200": {
                        "$ref": "#/components/responses/MonthlyScoreSuccess"
                    },
                    "400": {
                        "$ref": "#/components/responses/BadRequest"
                    },
                    "401": {
                        "$ref": "#/components/responses/Unauthorized"
                    },
                    "500": {
                        "$ref": "#/components/responses/InternalServerError"
                    }
                }
            }
        }
    },
    "components": {
        "securitySchemes": {
            "BearerAuth": {
                "type": "http",
                "scheme": "bearer",
                "bearerFormat": "JWT",
                "description": "JWT token obtained from Keycloak (RS256 + JWKS). Include as `Authorization: Bearer <token>` on all `/api/*` requests.\n"
            }
        },
        "schemas": {
            "ApiResponse": {
                "type": "object",
                "description": "Standard API response wrapper",
                "properties": {
                    "data": {
                        "type": "object",
                        "description": "Response payload",
                        "additionalProperties": true
                    },
                    "message": {
                        "type": "string",
                        "description": "Human-readable message describing the response"
                    },
                    "request_id": {
                        "type": "string",
                        "format": "uuid",
                        "description": "Unique identifier for the request, useful for tracing"
                    }
                },
                "required": [
                    "data",
                    "message",
                    "request_id"
                ]
            },
            "ApiResponseArray": {
                "type": "object",
                "description": "Standard API response wrapper for array data",
                "properties": {
                    "data": {
                        "type": "array",
                        "description": "Array of response items",
                        "items": {
                            "type": "object"
                        }
                    },
                    "message": {
                        "type": "string",
                        "description": "Human-readable message describing the response"
                    },
                    "request_id": {
                        "type": "string",
                        "format": "uuid",
                        "description": "Unique identifier for the request, useful for tracing"
                    }
                },
                "required": [
                    "data",
                    "message",
                    "request_id"
                ]
            },
            "ErrorResponse": {
                "type": "object",
                "description": "Error response",
                "properties": {
                    "data": {
                        "type": "object",
                        "description": "Additional error details",
                        "properties": {
                            "errors": {
                                "type": "array",
                                "description": "Array of validation errors (present on 400 responses)",
                                "items": {
                                    "type": "object",
                                    "properties": {
                                        "instance_path": {
                                            "type": "string",
                                            "description": "JSON path to the field with the error"
                                        },
                                        "schema_path": {
                                            "type": "string",
                                            "description": "Path in the schema where the error occurred"
                                        },
                                        "keyword": {
                                            "type": "string",
                                            "description": "Validation keyword that failed"
                                        },
                                        "params": {
                                            "type": "object",
                                            "description": "Additional parameters related to the error"
                                        },
                                        "message": {
                                            "type": "string",
                                            "description": "Error message"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "message": {
                        "type": "string",
                        "description": "Human-readable error message"
                    },
                    "request_id": {
                        "type": "string",
                        "format": "uuid",
                        "description": "Unique identifier for the request"
                    }
                },
                "required": [
                    "data",
                    "message"
                ]
            },
            "HabitStatus": {
                "type": "string",
                "description": "Current status of the habit",
                "enum": [
                    "ACTIVE",
                    "PAUSED",
                    "STOPPED",
                    "ARCHIVED"
                ],
                "example": "ACTIVE"
            },
            "Habit": {
                "type": "object",
                "description": "A habit entity",
                "properties": {
                    "id": {
                        "type": "string",
                        "format": "uuid",
                        "description": "Unique identifier for the habit",
                        "example": "a1b2c3d4-e5f6-4789-abcd-ef1234567890"
                    },
                    "user_id": {
                        "type": "string",
                        "format": "uuid",
                        "description": "ID of the user who owns this habit",
                        "example": "3c8d2b1a-4e5f-6789-abcd-ef1234567890"
                    },
                    "name": {
                        "type": "string",
                        "description": "Name of the habit",
                        "example": "Morning Exercise"
                    },
                    "description": {
                        "type": "string",
                        "nullable": true,
                        "description": "Optional description of the habit",
                        "example": "30 minutes of cardio every morning"
                    },
                    "frequency": {
                        "type": "string",
                        "description": "Unix cron pattern (5-field) defining when the habit is due. Default is daily.",
                        "example": "0 0 * * 1-5"
                    },
                    "emoji": {
                        "type": "string",
                        "nullable": true,
                        "description": "Optional emoji for visual identification",
                        "example": "\ud83c\udfc3"
                    },
                    "color": {
                        "type": "string",
                        "nullable": true,
                        "description": "Optional hex color code for visual customization",
                        "example": "#4CAF50"
                    },
                    "status": {
                        "$ref": "#/components/schemas/HabitStatus"
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time",
                        "description": "Timestamp when the habit was created",
                        "example": "2026-02-01T08:00:00.000Z"
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time",
                        "description": "Timestamp when the habit was last updated",
                        "example": "2026-02-20T10:30:00.000Z"
                    },
                    "is_deleted": {
                        "type": "boolean",
                        "description": "Whether the habit has been soft-deleted",
                        "example": false
                    }
                },
                "required": [
                    "id",
                    "user_id",
                    "name",
                    "frequency",
                    "status",
                    "created_at",
                    "updated_at",
                    "is_deleted"
                ]
            },
            "CreateHabitRequest": {
                "type": "object",
                "description": "Request body for creating a new habit",
                "properties": {
                    "name": {
                        "type": "string",
                        "description": "Name of the habit",
                        "example": "Morning Exercise"
                    },
                    "description": {
                        "type": "string",
                        "nullable": true,
                        "description": "Optional description of the habit",
                        "example": "30 minutes of cardio every morning"
                    },
                    "frequency": {
                        "type": "string",
                        "description": "Unix cron pattern (5-field) defining when the habit is due.\nFormat: minute hour dayOfMonth month dayOfWeek\nExamples:\n- '0 0 * * *' - Daily (default)\n- '0 0 * * 1-5' - Weekdays only\n- '0 0 * * 1,3,5' - Monday, Wednesday, Friday\n- '0 0 1 * *' - First day of each month\n",
                        "example": "0 0 * * 1-5"
                    },
                    "emoji": {
                        "type": "string",
                        "nullable": true,
                        "description": "Optional emoji for visual identification",
                        "example": "\ud83c\udfc3"
                    },
                    "color": {
                        "type": "string",
                        "nullable": true,
                        "description": "Optional hex color code for visual customization",
                        "example": "#4CAF50"
                    }
                },
                "required": [
                    "name"
                ],
                "additionalProperties": false
            },
            "UpdateHabitRequest": {
                "type": "object",
                "description": "Request body for updating a habit's properties",
                "properties": {
                    "name": {
                        "type": "string",
                        "description": "New name for the habit",
                        "example": "Evening Walk"
                    },
                    "description": {
                        "type": "string",
                        "nullable": true,
                        "description": "New description for the habit",
                        "example": "A 30-minute walk after dinner"
                    },
                    "frequency": {
                        "type": "string",
                        "description": "Unix cron pattern (5-field) defining when the habit is due.\nFormat: minute hour dayOfMonth month dayOfWeek\n",
                        "example": "0 0 * * 1-5"
                    },
                    "emoji": {
                        "type": "string",
                        "nullable": true,
                        "description": "Optional emoji for visual identification",
                        "example": "\ud83d\udeb6"
                    },
                    "color": {
                        "type": "string",
                        "nullable": true,
                        "description": "Optional hex color code for visual customization",
                        "example": "#2196F3"
                    }
                },
                "additionalProperties": false
            },
            "UpdateHabitStatusRequest": {
                "type": "object",
                "description": "Request body for updating a habit's status",
                "properties": {
                    "status": {
                        "$ref": "#/components/schemas/HabitStatus"
                    }
                },
                "required": [
                    "status"
                ],
                "additionalProperties": false
            },
            "Tracking": {
                "type": "object",
                "description": "A habit tracking entry for a specific date",
                "properties": {
                    "id": {
                        "type": "string",
                        "format": "uuid",
                        "description": "Unique identifier for the tracking entry",
                        "example": "d1e2f3a4-b5c6-4789-abcd-ef1234567890"
                    },
                    "habit_id": {
                        "type": "string",
                        "format": "uuid",
                        "description": "ID of the habit being tracked",
                        "example": "a1b2c3d4-e5f6-4789-abcd-ef1234567890"
                    },
                    "user_id": {
                        "type": "string",
                        "format": "uuid",
                        "description": "ID of the user who owns this tracking entry",
                        "example": "3c8d2b1a-4e5f-6789-abcd-ef1234567890"
                    },
                    "date": {
                        "type": "string",
                        "format": "date-time",
                        "description": "The date for this tracking entry",
                        "example": "2026-02-15T00:00:00.000Z"
                    },
                    "completed": {
                        "type": "boolean",
                        "description": "Whether the habit was completed on this date",
                        "example": true
                    },
                    "note": {
                        "type": "string",
                        "nullable": true,
                        "description": "Optional note for this tracking entry",
                        "example": "Felt great today!"
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time",
                        "description": "Timestamp when the tracking entry was created",
                        "example": "2026-02-15T20:00:00.000Z"
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time",
                        "description": "Timestamp when the tracking entry was last updated",
                        "example": "2026-02-15T20:00:00.000Z"
                    },
                    "is_deleted": {
                        "type": "boolean",
                        "description": "Whether the tracking entry has been soft-deleted",
                        "example": false
                    }
                },
                "required": [
                    "id",
                    "habit_id",
                    "user_id",
                    "date",
                    "completed",
                    "created_at",
                    "updated_at",
                    "is_deleted"
                ]
            },
            "CreateTrackingRequest": {
                "type": "object",
                "description": "Request body for logging a habit tracking entry",
                "properties": {
                    "habit_id": {
                        "type": "string",
                        "format": "uuid",
                        "description": "ID of the habit to track",
                        "example": "a1b2c3d4-e5f6-4789-abcd-ef1234567890"
                    },
                    "date": {
                        "type": "string",
                        "format": "date",
                        "description": "Date of the tracking entry (YYYY-MM-DD)",
                        "example": "2026-02-15"
                    },
                    "completed": {
                        "type": "boolean",
                        "description": "Whether the habit was completed on this date",
                        "example": true
                    },
                    "note": {
                        "type": "string",
                        "nullable": true,
                        "description": "Optional note for this entry",
                        "example": "Felt great today!"
                    }
                },
                "required": [
                    "habit_id",
                    "date",
                    "completed"
                ],
                "additionalProperties": false
            },
            "UpdateTrackingRequest": {
                "type": "object",
                "description": "Request body for updating a tracking entry. At least one field must be provided.",
                "properties": {
                    "completed": {
                        "type": "boolean",
                        "nullable": true,
                        "description": "Whether the habit was completed on this date",
                        "example": true
                    },
                    "note": {
                        "type": "string",
                        "nullable": true,
                        "description": "Optional note for this entry",
                        "example": "Updated note - felt great today!"
                    }
                },
                "additionalProperties": false
            },
            "DailyScore": {
                "type": "object",
                "description": "Score calculated from habit tracking data for a single day",
                "properties": {
                    "date": {
                        "type": "string",
                        "format": "date-time",
                        "description": "The date for this score",
                        "example": "2026-02-15T00:00:00.000Z"
                    },
                    "user_id": {
                        "type": "string",
                        "format": "uuid",
                        "description": "ID of the user this score belongs to",
                        "example": "3c8d2b1a-4e5f-6789-abcd-ef1234567890"
                    },
                    "completed_count": {
                        "type": "integer",
                        "description": "Number of habits completed on this date",
                        "example": 3
                    },
                    "total_count": {
                        "type": "integer",
                        "description": "Total number of active habits on this date",
                        "example": 5
                    },
                    "score": {
                        "type": "number",
                        "format": "float",
                        "description": "Completion percentage (0\u2013100)",
                        "example": 60
                    }
                },
                "required": [
                    "date",
                    "user_id",
                    "completed_count",
                    "total_count",
                    "score"
                ]
            },
            "WeeklyScore": {
                "type": "object",
                "description": "Score calculated from habit tracking data for a calendar week",
                "properties": {
                    "year": {
                        "type": "integer",
                        "description": "ISO year of the week",
                        "example": 2026
                    },
                    "week_number": {
                        "type": "integer",
                        "description": "ISO week number (1\u201353)",
                        "example": 7
                    },
                    "user_id": {
                        "type": "string",
                        "format": "uuid",
                        "description": "ID of the user this score belongs to",
                        "example": "3c8d2b1a-4e5f-6789-abcd-ef1234567890"
                    },
                    "completed_count": {
                        "type": "integer",
                        "description": "Total habit completions during this week",
                        "example": 18
                    },
                    "total_count": {
                        "type": "integer",
                        "description": "Total possible habit completions during this week",
                        "example": 35
                    },
                    "score": {
                        "type": "number",
                        "format": "float",
                        "description": "Completion percentage (0\u2013100)",
                        "example": 51.43
                    }
                },
                "required": [
                    "year",
                    "week_number",
                    "user_id",
                    "completed_count",
                    "total_count",
                    "score"
                ]
            },
            "MonthlyScore": {
                "type": "object",
                "description": "Score calculated from habit tracking data for a calendar month",
                "properties": {
                    "month": {
                        "type": "integer",
                        "description": "Month number (1\u201312)",
                        "example": 2
                    },
                    "year": {
                        "type": "integer",
                        "description": "Year",
                        "example": 2026
                    },
                    "user_id": {
                        "type": "string",
                        "format": "uuid",
                        "description": "ID of the user this score belongs to",
                        "example": "3c8d2b1a-4e5f-6789-abcd-ef1234567890"
                    },
                    "completed_count": {
                        "type": "integer",
                        "description": "Total habit completions during this month",
                        "example": 72
                    },
                    "total_count": {
                        "type": "integer",
                        "description": "Total possible habit completions during this month",
                        "example": 140
                    },
                    "score": {
                        "type": "number",
                        "format": "float",
                        "description": "Completion percentage (0\u2013100)",
                        "example": 51.43
                    }
                },
                "required": [
                    "month",
                    "year",
                    "user_id",
                    "completed_count",
                    "total_count",
                    "score"
                ]
            }
        },
        "parameters": {
            "LimitParam": {
                "name": "limit",
                "in": "query",
                "description": "Maximum number of items to return",
                "required": false,
                "schema": {
                    "type": "integer",
                    "minimum": 1,
                    "maximum": 1000,
                    "default": 100
                },
                "example": 100
            },
            "OffsetParam": {
                "name": "offset",
                "in": "query",
                "description": "Number of items to skip before returning results",
                "required": false,
                "schema": {
                    "type": "integer",
                    "minimum": 0,
                    "default": 0
                },
                "example": 0
            },
            "HabitId": {
                "name": "id",
                "in": "path",
                "description": "Unique identifier of the habit",
                "required": true,
                "schema": {
                    "type": "string",
                    "format": "uuid"
                },
                "example": "a1b2c3d4-e5f6-4789-abcd-ef1234567890"
            },
            "TrackingId": {
                "name": "id",
                "in": "path",
                "description": "Unique identifier of the tracking entry",
                "required": true,
                "schema": {
                    "type": "string",
                    "format": "uuid"
                },
                "example": "d1e2f3a4-b5c6-4789-abcd-ef1234567890"
            }
        },
        "responses": {
            "BadRequest": {
                "description": "Bad Request - Invalid input or missing required fields",
                "content": {
                    "application/json": {
                        "schema": {
                            "$ref": "#/components/schemas/ErrorResponse"
                        },
                        "examples": {
                            "validationError": {
                                "summary": "Validation error example",
                                "value": {
                                    "data": {
                                        "errors": [
                                            {
                                                "instance_path": "/name",
                                                "schema_path": "#/properties/name/type",
                                                "keyword": "type",
                                                "params": {
                                                    "type": "string"
                                                },
                                                "message": "must be string"
                                            }
                                        ]
                                    },
                                    "message": "missing/invalid properties",
                                    "request_id": "6ba7b810-9dad-41d1-80b4-00c04fd430c8"
                                }
                            }
                        }
                    }
                }
            },
            "Unauthorized": {
                "description": "Unauthorized - Missing or invalid authentication token",
                "content": {
                    "application/json": {
                        "schema": {
                            "$ref": "#/components/schemas/ErrorResponse"
                        },
                        "example": {
                            "data": {},
                            "message": "unauthorized",
                            "request_id": "6ba7b810-9dad-41d1-80b4-00c04fd430c8"
                        }
                    }
                }
            },
            "Forbidden": {
                "description": "Forbidden - Insufficient permissions to access the resource",
                "content": {
                    "application/json": {
                        "schema": {
                            "$ref": "#/components/schemas/ErrorResponse"
                        },
                        "example": {
                            "data": {},
                            "message": "forbidden",
                            "request_id": "6ba7b810-9dad-41d1-80b4-00c04fd430c8"
                        }
                    }
                }
            },
            "NotFound": {
                "description": "Not Found - The requested resource does not exist",
                "content": {
                    "application/json": {
                        "schema": {
                            "$ref": "#/components/schemas/ErrorResponse"
                        },
                        "example": {
                            "data": {},
                            "message": "not found",
                            "request_id": "6ba7b810-9dad-41d1-80b4-00c04fd430c8"
                        }
                    }
                }
            },
            "Conflict": {
                "description": "Conflict - The request conflicts with the current state",
                "content": {
                    "application/json": {
                        "schema": {
                            "$ref": "#/components/schemas/ErrorResponse"
                        },
                        "example": {
                            "data": {},
                            "message": "resource already exists",
                            "request_id": "6ba7b810-9dad-41d1-80b4-00c04fd430c8"
                        }
                    }
                }
            },
            "NoContent": {
                "description": "No Content - The resource was successfully deleted"
            },
            "InternalServerError": {
                "description": "Internal Server Error - Something went wrong on the server",
                "content": {
                    "application/json": {
                        "schema": {
                            "$ref": "#/components/schemas/ErrorResponse"
                        },
                        "example": {
                            "data": {},
                            "message": "Internal server error",
                            "request_id": "6ba7b810-9dad-41d1-80b4-00c04fd430c8"
                        }
                    }
                }
            },
            "HabitSuccess": {
                "description": "Successful operation - returns a single habit",
                "content": {
                    "application/json": {
                        "schema": {
                            "type": "object",
                            "properties": {
                                "data": {
                                    "$ref": "#/components/schemas/Habit"
                                },
                                "message": {
                                    "type": "string"
                                },
                                "requestId": {
                                    "type": "string",
                                    "format": "uuid"
                                }
                            }
                        },
                        "example": {
                            "data": {
                                "id": "a1b2c3d4-e5f6-4789-abcd-ef1234567890",
                                "user_id": "3c8d2b1a-4e5f-6789-abcd-ef1234567890",
                                "name": "Morning Exercise",
                                "description": "30 minutes of cardio every morning",
                                "status": "ACTIVE",
                                "created_at": "2026-02-01T08:00:00.000Z",
                                "updated_at": "2026-02-20T10:30:00.000Z",
                                "is_deleted": false
                            },
                            "message": "",
                            "request_id": "6ba7b810-9dad-41d1-80b4-00c04fd430c8"
                        }
                    }
                }
            },
            "HabitListSuccess": {
                "description": "Successful operation - returns a list of habits",
                "content": {
                    "application/json": {
                        "schema": {
                            "type": "object",
                            "properties": {
                                "data": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/components/schemas/Habit"
                                    }
                                },
                                "message": {
                                    "type": "string"
                                },
                                "requestId": {
                                    "type": "string",
                                    "format": "uuid"
                                }
                            }
                        },
                        "example": {
                            "data": [
                                {
                                    "id": "a1b2c3d4-e5f6-4789-abcd-ef1234567890",
                                    "user_id": "3c8d2b1a-4e5f-6789-abcd-ef1234567890",
                                    "name": "Morning Exercise",
                                    "description": "30 minutes of cardio every morning",
                                    "status": "ACTIVE",
                                    "created_at": "2026-02-01T08:00:00.000Z",
                                    "updated_at": "2026-02-20T10:30:00.000Z",
                                    "is_deleted": false
                                },
                                {
                                    "id": "b2c3d4e5-f6a7-4901-bcde-f12345678901",
                                    "user_id": "3c8d2b1a-4e5f-6789-abcd-ef1234567890",
                                    "name": "Read 30 minutes",
                                    "description": null,
                                    "status": "ACTIVE",
                                    "created_at": "2026-02-05T09:00:00.000Z",
                                    "updated_at": "2026-02-05T09:00:00.000Z",
                                    "is_deleted": false
                                }
                            ],
                            "message": "",
                            "request_id": "6ba7b810-9dad-41d1-80b4-00c04fd430c8"
                        }
                    }
                }
            },
            "TrackingSuccess": {
                "description": "Successful operation - returns a single tracking entry",
                "content": {
                    "application/json": {
                        "schema": {
                            "type": "object",
                            "properties": {
                                "data": {
                                    "$ref": "#/components/schemas/Tracking"
                                },
                                "message": {
                                    "type": "string"
                                },
                                "requestId": {
                                    "type": "string",
                                    "format": "uuid"
                                }
                            }
                        },
                        "example": {
                            "data": {
                                "id": "d1e2f3a4-b5c6-4789-abcd-ef1234567890",
                                "habit_id": "a1b2c3d4-e5f6-4789-abcd-ef1234567890",
                                "user_id": "3c8d2b1a-4e5f-6789-abcd-ef1234567890",
                                "date": "2026-02-15T00:00:00.000Z",
                                "completed": true,
                                "note": "Felt great today!",
                                "created_at": "2026-02-15T20:00:00.000Z",
                                "updated_at": "2026-02-15T20:00:00.000Z",
                                "is_deleted": false
                            },
                            "message": "",
                            "request_id": "6ba7b810-9dad-41d1-80b4-00c04fd430c8"
                        }
                    }
                }
            },
            "TrackingListSuccess": {
                "description": "Successful operation - returns a list of tracking entries",
                "content": {
                    "application/json": {
                        "schema": {
                            "type": "object",
                            "properties": {
                                "data": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/components/schemas/Tracking"
                                    }
                                },
                                "message": {
                                    "type": "string"
                                },
                                "requestId": {
                                    "type": "string",
                                    "format": "uuid"
                                }
                            }
                        },
                        "example": {
                            "data": [
                                {
                                    "id": "d1e2f3a4-b5c6-4789-abcd-ef1234567890",
                                    "habit_id": "a1b2c3d4-e5f6-4789-abcd-ef1234567890",
                                    "user_id": "3c8d2b1a-4e5f-6789-abcd-ef1234567890",
                                    "date": "2026-02-15T00:00:00.000Z",
                                    "completed": true,
                                    "note": "Felt great today!",
                                    "created_at": "2026-02-15T20:00:00.000Z",
                                    "updated_at": "2026-02-15T20:00:00.000Z",
                                    "is_deleted": false
                                },
                                {
                                    "id": "e2f3a4b5-c6d7-4901-bcde-f12345678901",
                                    "habit_id": "a1b2c3d4-e5f6-4789-abcd-ef1234567890",
                                    "user_id": "3c8d2b1a-4e5f-6789-abcd-ef1234567890",
                                    "date": "2026-02-14T00:00:00.000Z",
                                    "completed": false,
                                    "note": null,
                                    "created_at": "2026-02-14T21:00:00.000Z",
                                    "updated_at": "2026-02-14T21:00:00.000Z",
                                    "is_deleted": false
                                }
                            ],
                            "message": "",
                            "request_id": "6ba7b810-9dad-41d1-80b4-00c04fd430c8"
                        }
                    }
                }
            },
            "DailyScoreSuccess": {
                "description": "Successful operation - returns the daily score",
                "content": {
                    "application/json": {
                        "schema": {
                            "type": "object",
                            "properties": {
                                "data": {
                                    "$ref": "#/components/schemas/DailyScore"
                                },
                                "message": {
                                    "type": "string"
                                },
                                "requestId": {
                                    "type": "string",
                                    "format": "uuid"
                                }
                            }
                        },
                        "example": {
                            "data": {
                                "date": "2026-02-15T00:00:00.000Z",
                                "user_id": "3c8d2b1a-4e5f-6789-abcd-ef1234567890",
                                "completed_count": 3,
                                "total_count": 5,
                                "score": 60
                            },
                            "message": "",
                            "request_id": "6ba7b810-9dad-41d1-80b4-00c04fd430c8"
                        }
                    }
                }
            },
            "WeeklyScoreSuccess": {
                "description": "Successful operation - returns the weekly score",
                "content": {
                    "application/json": {
                        "schema": {
                            "type": "object",
                            "properties": {
                                "data": {
                                    "$ref": "#/components/schemas/WeeklyScore"
                                },
                                "message": {
                                    "type": "string"
                                },
                                "requestId": {
                                    "type": "string",
                                    "format": "uuid"
                                }
                            }
                        },
                        "example": {
                            "data": {
                                "year": 2026,
                                "week_number": 7,
                                "user_id": "3c8d2b1a-4e5f-6789-abcd-ef1234567890",
                                "completed_count": 18,
                                "total_count": 35,
                                "score": 51.43
                            },
                            "message": "",
                            "request_id": "6ba7b810-9dad-41d1-80b4-00c04fd430c8"
                        }
                    }
                }
            },
            "MonthlyScoreSuccess": {
                "description": "Successful operation - returns the monthly score",
                "content": {
                    "application/json": {
                        "schema": {
                            "type": "object",
                            "properties": {
                                "data": {
                                    "$ref": "#/components/schemas/MonthlyScore"
                                },
                                "message": {
                                    "type": "string"
                                },
                                "requestId": {
                                    "type": "string",
                                    "format": "uuid"
                                }
                            }
                        },
                        "example": {
                            "data": {
                                "month": 2,
                                "year": 2026,
                                "user_id": "3c8d2b1a-4e5f-6789-abcd-ef1234567890",
                                "completed_count": 72,
                                "total_count": 140,
                                "score": 51.43
                            },
                            "message": "",
                            "request_id": "6ba7b810-9dad-41d1-80b4-00c04fd430c8"
                        }
                    }
                }
            }
        }
    }
}
